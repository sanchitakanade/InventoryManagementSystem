!function(e){function t(t){for(var n,l,o=t[0],i=t[1],c=t[2],m=0,d=[];m<o.length;m++)l=o[m],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&d.push(s[l][0]),s[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(t);d.length;)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var i=a[o];0!==s[i]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},s={0:0},r=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window.webpackJsonp=window.webpackJsonp||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=i;r.push([248,1]),a()}({248:function(e,t,a){e.exports=a(532)},532:function(e,t,a){"use strict";a.r(t);a(249),a(451);var n=a(0),s=a.n(n),r=a(549),l=a(544),o=a(543),i=a(548),c=a(245),u=a(545),m=a(246),d=a(73),h=a(19),p=a.n(h),E=a(217),g=a(239),y=a(238),b=a(126),C=a(100),v=a.n(C),S=a(546);async function w(e,t={},a=null){try{const n=await fetch(window.ENV.UI_API_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:t})}),s=await n.text(),r=JSON.parse(s);if(r.errors){const e=r.errors[0];if("BAD_USER_INPUT"===e.extensions.code){const t=e.extensions.exception.errors.join("\n ");a&&a(`${e.message}:\n ${t}`)}else a&&a(`${e.extensions.code}: ${e.message}`)}return r.data}catch(e){return a&&a(`Error in sending data to server: ${e.message}`),null}}var f=a(534),P=a(551),T=a(131),x=a(535);const $=[],I=s.a.createElement(f.a,{id:"close-tooltip",placement:"top"},"Edit Product"),N=s.a.createElement(f.a,{id:"delete-tooltip",placement:"top"},"Delete Product");function O({product:e,deleteProduct:t,index:a}){return $[e.id]=e.Image,s.a.createElement("tr",null,s.a.createElement("td",null,e.Name),s.a.createElement("td",null,"$".concat(e.Price)),s.a.createElement("td",null,e.Category),s.a.createElement("td",null,s.a.createElement("a",{href:`/#/view/${e.id}`},"View")),s.a.createElement("td",null,s.a.createElement(d.LinkContainer,{to:`/edit/${e.id}`},s.a.createElement(P.a,{delayShow:1e3,overlay:I},s.a.createElement(T.a,{bsSize:"sm"},s.a.createElement(c.a,{glyph:"edit"}))))),s.a.createElement("td",null,s.a.createElement(P.a,{delayShow:1e3,overlay:N},s.a.createElement(T.a,{bsSize:"sm",type:"button",onClick:()=>{t(a)}},s.a.createElement(c.a,{glyph:"trash"})))))}function D({products:e,deleteProduct:t}){const a=e.map((e,a)=>s.a.createElement(O,{key:e.id,product:e,deleteProduct:t,index:a}));return s.a.createElement(x.a,{bordered:!0,condensed:!0,hover:!0,responsive:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Product Name"),s.a.createElement("th",null,"Price"),s.a.createElement("th",null,"Category"),s.a.createElement("th",null,"Image"),s.a.createElement("th",null,"Update"),s.a.createElement("th",null,"Delete"))),s.a.createElement("tbody",null,a))}var M=a(536),k=a(537),F=a(538),B=a(539),V=a(550);class j extends s.a.Component{constructor(){super(),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(e){const t=document.forms.productAdd,a=t.Price.value,n=a.substr(1,a.length);e.preventDefault();const s={Category:t.Category.value,Price:n,Name:t.Name.value,Image:document.getElementById("image").value},{createProduct:r}=this.props;r(s),t.Category.value="Shirts",t.Price.value="$",t.Name.value="",t.Image.value=""}render(){return s.a.createElement("form",{name:"productAdd",onSubmit:this.handleSubmit},s.a.createElement(M.a,null,s.a.createElement(k.a,{xs:6,sm:4,md:3,lg:2},s.a.createElement(F.a,null,s.a.createElement(B.a,null,"Category:"),s.a.createElement(V.a,{componentClass:"select",name:"Category",id:"productCategory"},s.a.createElement("option",null,"Shirts"),s.a.createElement("option",null,"Jeans"),s.a.createElement("option",null,"Jackets"),s.a.createElement("option",null,"Sweaters"),s.a.createElement("option",null,"Accessories")))),s.a.createElement(k.a,{xs:6,sm:4,md:3,lg:2},s.a.createElement(F.a,null,s.a.createElement(B.a,null,"  Product Name: "),s.a.createElement(V.a,{type:"text",name:"Name",id:"name"})))),s.a.createElement(M.a,null,s.a.createElement(k.a,{xs:6,sm:4,md:3,lg:2},s.a.createElement(F.a,null,s.a.createElement(B.a,null,"Price Per Unit: "),s.a.createElement(V.a,{type:"text",name:"Price",id:"price"}))),s.a.createElement(k.a,{xs:6,sm:4,md:3,lg:2},s.a.createElement(F.a,null,s.a.createElement(B.a,null,"Image URL: "),s.a.createElement(V.a,{type:"url",name:"Image",id:"image"})))),s.a.createElement(M.a,null,s.a.createElement(k.a,{xs:4,sm:4,md:2,lg:2},s.a.createElement(F.a,null,s.a.createElement(B.a,null," "),s.a.createElement(T.a,{bsStyle:"primary",type:"submit"},"Add Product")))))}}var A=a(240),J=a(540);class U extends s.a.Component{constructor({location:{search:e}}){super();const t=new v.a(e);this.state={Category:t.get("Category")||"",changed:!1},this.onChangeCategory=this.onChangeCategory.bind(this),this.applyFilter=this.applyFilter.bind(this),this.showOriginalFilter=this.showOriginalFilter.bind(this)}componentDidUpdate(e){const{location:{search:t}}=e,{location:{search:a}}=this.props;t!==a&&this.showOriginalFilter()}onChangeCategory(e){this.setState({Category:e.target.value,changed:!0})}showOriginalFilter(){const{location:{search:e}}=this.props,t=new v.a(e);this.setState({Category:t.get("Category")||"",changed:!1})}applyFilter(){const{Category:e}=this.state,{history:t}=this.props;t.push({pathname:"/products",search:e?`?Category=${e}`:""})}render(){const{Category:e,changed:t}=this.state;return s.a.createElement(J.a,{inline:!0},s.a.createElement(F.a,null,s.a.createElement(B.a,null,"Category:")," ",s.a.createElement(V.a,{componentClass:"select",value:e,onChange:this.onChangeCategory},s.a.createElement("option",{value:""},"(All)"),s.a.createElement("option",{value:"Shirts"},"Shirts"),s.a.createElement("option",{value:"Jeans"},"Jeans"),s.a.createElement("option",{value:"Jackets"},"Jackets"),s.a.createElement("option",{value:"Sweaters"},"Sweaters")))," ",s.a.createElement(T.a,{bsStyle:"primary",type:"button",onClick:this.applyFilter},"Apply")," ",s.a.createElement(T.a,{type:"button",onClick:this.showOriginalFilter,disabled:!t},"Reset"))}}var L=Object(A.a)(U),_=a(135),H=a(541);class R extends s.a.Component{componentDidUpdate(){const{showing:e,onDismiss:t}=this.props;e&&(clearTimeout(this.dismissTimer),this.dismissTimer=setTimeout(t,5e3))}componentWillUnmount(){clearTimeout(this.dismissTimer)}render(){const{showing:e,bsStyle:t,onDismiss:a,children:n}=this.props;return s.a.createElement(_.a,{in:e},s.a.createElement("div",{style:{position:"fixed",bottom:20,left:20}},s.a.createElement(H.a,{bsStyle:t,onDismiss:a},n)))}}class q extends s.a.Component{constructor(){super(),this.state={products:[],toastVisible:!1,toastMessage:" ",toastType:"info"},this.createProduct=this.createProduct.bind(this),this.deleteProduct=this.deleteProduct.bind(this),this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}componentDidMount(){this.loadData(),document.forms.productAdd.Price.value="$"}componentDidUpdate(e){const{location:{search:t}}=e,{location:{search:a}}=this.props;t!==a&&this.loadData()}async loadData(){const{location:{search:e}}=this.props,t=new v.a(e),a={};t.get("Category")&&(a.Category=t.get("Category"));const n=await w("query productList($Category: ProductCategory){\n      productList(Category: $Category) {\n          id Category Name Price\n          Image\n      }\n      }",a,this.showError);n&&this.setState({products:n.productList})}async createProduct(e){await w("mutation addProduct($product: productInputs!) {\n    addProduct(product: $product) {\n        id\n    }\n    }",{product:e},this.showError)&&this.loadData()}async deleteProduct(e){const{products:t}=this.state,{location:{pathname:a,search:n},history:s}=this.props,{id:r}=t[e],l=await w("mutation deleteProduct($id: Int!) {\n      deleteProduct(id: $id)\n    }",{id:r},this.showError);l&&l.deleteProduct?(this.showSuccess(`Deleted product ${r} successfully.`),this.setState(t=>{const l=[...t.products];return a===`/products/${r}`&&s.push({pathname:"/products",search:n}),l.splice(e,1),{products:l}})):this.list()}showSuccess(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}dismissToast(){this.setState({toastVisible:!1})}render(){const{products:e}=this.state,{toastVisible:t,toastType:a,toastMessage:n}=this.state;return s.a.createElement(s.a.Fragment,null,s.a.createElement(S.a,null,s.a.createElement(S.a.Heading,null,s.a.createElement(S.a.Title,{toggle:!0},"Filter")),s.a.createElement(S.a.Body,{collapsible:!0},s.a.createElement(L,null))),s.a.createElement(D,{products:e,deleteProduct:this.deleteProduct}),s.a.createElement(j,{createProduct:this.createProduct}),s.a.createElement(R,{showing:t,onDismiss:this.dismissToast,bsStyle:a},n))}}function z({match:e}){const{id:t}=e.params;return s.a.createElement("img",{src:$[t],alt:""})}var W=a(542),G=a(98);function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class Q extends s.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t.toString():"")},this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onChange(e){e.target.value.match(/^\d*$/)&&this.setState({value:e.target.value})}onBlur(e){const{onChange:t}=this.props,{value:a}=this.state;t(e,function(e){const t=parseInt(e,10);return Number.isNaN(t)?null:t}(a))}render(){const{value:e}=this.state;return s.a.createElement("input",K({type:"text"},this.props,{value:e,onBlur:this.onBlur,onChange:this.onChange}))}}class X extends s.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t:"")},this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onChange(e){this.setState({value:e.target.value})}onBlur(e){const{onChange:t}=this.props,{value:a}=this.state;var n;t(e,0===(n=a).trim().length?null:n)}render(){const{value:e}=this.state,{tag:t="input",...a}=this.props;return s.a.createElement(t,{...a,value:e,onBlur:this.onBlur,onChange:this.onChange})}}class Y extends s.a.Component{constructor(){super(),this.state={product:{},invalidFields:{},toastVisible:!1,toastMessage:" ",toastType:"success"},this.onChange=this.onChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.onValidityChange=this.onValidityChange.bind(this),this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}componentDidMount(){this.loadData()}componentDidUpdate(e){const{match:{params:{id:t}}}=e,{match:{params:{id:a}}}=this.props;a!==t&&this.loadData()}onChange(e,t){const{name:a,value:n}=e.target,s=void 0===t?n:t;this.setState(e=>({product:{...e.product,[a]:s}}))}onValidityChange(e,t){const{name:a}=e.target;this.setState(e=>{const n={...e.invalidFields,[a]:!t};return t&&delete n[a],{invalidFields:n}})}async handleSubmit(e){e.preventDefault();const{product:t,invalidFields:a}=this.state;if(0!==Object.keys(a).length)return;const{id:n,...s}=t,r=await w("mutation updateProduct(\n      $id: Int!\n      $changes: ProductUpdateInputs!\n    ) {\n       updateProduct(\n         id: $id \n         changes: $changes) {\n          id Category Name\n          Price Image\n       }\n      }",{changes:s,id:n},this.showError);r&&(this.setState({product:r.updateProduct}),this.showSuccess("Updated product successfully"))}async loadData(){const{match:{params:{id:e}}}=this.props,t=await w("query product($id: Int!) {\n      product(id: $id) {\n      id Category Name Price\n      Image\n      }\n    }",{id:e},this.showError);t&&this.setState({product:t?t.product:{},invalidFields:{}})}showSuccess(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}dismissToast(){this.setState({toastVisible:!1})}render(){const{product:{id:e}}=this.state,{toastVisible:t,toastMessage:a,toastType:n}=this.state,{match:{params:{id:r}}}=this.props;if(null==e)return null!=r?s.a.createElement("h3",null,`Issue with ID ${r} not found.`):null;const{product:{Name:l,Category:o}}=this.state,{product:{Image:i,Price:c}}=this.state,{invalidFields:u}=this.state;let m;return 0!==Object.keys(u).length&&(m=s.a.createElement("div",{className:"error"},"Please correct invalid fields before submitting.")),s.a.createElement(k.a,{sm:9},s.a.createElement(S.a,null,s.a.createElement(S.a.Heading,null,s.a.createElement(S.a.Title,null,`Editing Product: ${e}`)),s.a.createElement(S.a.Body,null,s.a.createElement(J.a,{horizontal:!0,onSubmit:this.handleSubmit},s.a.createElement(F.a,null,s.a.createElement(k.a,{componentClass:B.a,sm:3},"Name:"),s.a.createElement(k.a,{sm:7},s.a.createElement(V.a,{componentClass:X,name:"Name",value:l,onChange:this.onChange,key:e}))),s.a.createElement(F.a,null,s.a.createElement(k.a,{componentClass:B.a,sm:3},"Category:"),s.a.createElement(k.a,{sm:7},s.a.createElement(V.a,{componentClass:"select",name:"Category",value:o,onChange:this.onChange},s.a.createElement("option",null,"Shirts"),s.a.createElement("option",null,"Jeans"),s.a.createElement("option",null,"Jackets"),s.a.createElement("option",null,"Sweaters"),s.a.createElement("option",null,"Accessories")))),s.a.createElement(F.a,null,s.a.createElement(k.a,{componentClass:B.a,sm:3},"Price:"),s.a.createElement(k.a,{sm:7},s.a.createElement(V.a,{componentClass:Q,name:"Price",value:c,onChange:this.onChange,key:e}))),s.a.createElement(F.a,null,s.a.createElement(k.a,{componentClass:B.a,sm:3},"Image:"),s.a.createElement(k.a,{sm:7},s.a.createElement(V.a,{componentClass:X,name:"Image",value:i,onChange:this.onChange,key:e}))),s.a.createElement(F.a,null,s.a.createElement(k.a,{smOffset:3,sm:6},s.a.createElement(W.a,null,s.a.createElement(T.a,{id:"updateButton",bsStyle:"primary",type:"submit"},"Submit"),s.a.createElement(d.LinkContainer,{to:"/products"},s.a.createElement(T.a,{bsStyle:"link"},"Back"))))),s.a.createElement(F.a,null,s.a.createElement(k.a,{smOffset:3,sm:9},m)))),s.a.createElement(S.a.Footer,null,s.a.createElement(G.a,{to:`/edit/${e-1}`,id:"prev"},"Prev")," | ",s.a.createElement(G.a,{to:`/edit/${e+1}`,id:"next"},"Next")),s.a.createElement(R,{showing:t,onDismiss:this.dismissToast,bsStyle:n},a)))}}const Z=()=>s.a.createElement("h1",null,"Page Not Found");function ee(){return s.a.createElement(g.a,null,s.a.createElement(y.a,{exact:!0,from:"/",to:"/products"}),s.a.createElement(b.a,{path:"/products",component:q}),s.a.createElement(b.a,{path:"/view/:id",component:z}),s.a.createElement(b.a,{path:"/edit/:id",component:Y}),s.a.createElement(b.a,{component:Z}))}var te=a(547);class ae extends s.a.Component{constructor(e){super(e),this.state={showing:!1,toastVisible:!1,toastMessage:"",toastType:"success"},this.showModal=this.showModal.bind(this),this.hideModal=this.hideModal.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}showModal(){this.setState({showing:!0})}hideModal(){this.setState({showing:!1})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}dismissToast(){this.setState({toastVisible:!1})}async handleSubmit(e){e.preventDefault(),this.hideModal();const t=document.forms.productAdd2,a={Category:t.Category.value,Name:t.Name.value,Price:t.Price.value,Image:t.Image.value},n=await w("mutation addProduct($product: productInputs!) {\n    addProduct(product: $product) {\n        id\n    } \n    }",{product:a},this.showError);if(n){const{history:e}=this.props;e.push(`/edit/${n.addProduct.id}`)}}render(){const{showing:e}=this.state,{toastVisible:t,toastMessage:a,toastType:n}=this.state;return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,{onClick:this.showModal},s.a.createElement(P.a,{placement:"left",delayShow:1e3,overlay:s.a.createElement(f.a,{id:"create-product"},"Create Product")},s.a.createElement(c.a,{glyph:"plus"}))),s.a.createElement(te.a,{keyboard:!0,show:e,onHide:this.hideModal},s.a.createElement(te.a.Header,{closeButton:!0},s.a.createElement(te.a.Title,null,"Create Product")),s.a.createElement(te.a.Body,null,s.a.createElement(J.a,{name:"productAdd2"},s.a.createElement(F.a,null,s.a.createElement(B.a,null,"Category"),s.a.createElement(V.a,{componentClass:"select",name:"Category",autoFocus:!0},s.a.createElement("option",null,"Shirts"),s.a.createElement("option",null,"Jeans"),s.a.createElement("option",null,"Jackets"),s.a.createElement("option",null,"Sweaters"),s.a.createElement("option",null,"Accessories"))),s.a.createElement(F.a,null,s.a.createElement(B.a,null,"Product Name"),s.a.createElement(V.a,{type:"text",name:"Name"})),s.a.createElement(F.a,null,s.a.createElement(B.a,null,"Price"),s.a.createElement(V.a,{type:"text",name:"Price"})),s.a.createElement(F.a,null,s.a.createElement(B.a,null,"Image URL"),s.a.createElement(V.a,{type:"text",name:"Image"})))),s.a.createElement(te.a.Footer,null,s.a.createElement(W.a,null,s.a.createElement(T.a,{type:"button",bsStyle:"primary",onClick:this.handleSubmit},"Submit"),s.a.createElement(T.a,{bsStyle:"link",onClick:this.hideModal},"Cancel")))),s.a.createElement(R,{showing:t,onDismiss:this.dismissToast,bsStyle:n},a))}}var ne=Object(A.a)(ae);function se(){return s.a.createElement(r.a,null,s.a.createElement(r.a.Header,null,s.a.createElement(r.a.Brand,null,"My Company Inventory")),s.a.createElement(l.a,null,s.a.createElement(d.LinkContainer,{exact:!0,to:"/"},s.a.createElement(o.a,null,"Home")),s.a.createElement(d.LinkContainer,{to:"/products"},s.a.createElement(o.a,null,"Product List"))),s.a.createElement(l.a,{pullRight:!0},s.a.createElement(ne,null),s.a.createElement(i.a,{id:"user-dropdown",title:s.a.createElement(c.a,{glyph:"option-vertical"}),noCaret:!0},s.a.createElement(u.a,null,"About"))))}const re=s.a.createElement(E.a,null,s.a.createElement("div",null,s.a.createElement(se,null),s.a.createElement(m.a,{fluid:!0},s.a.createElement(ee,null))));p.a.render(re,document.getElementById("content"))}});
//# sourceMappingURL=app.bundle.js.map